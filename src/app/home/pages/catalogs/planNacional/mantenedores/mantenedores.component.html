<!-- Bot√≥n volver -->
<button
  class="mb-4 px-4 py-2 bg-blue-800 text-white rounded hover:bg-blue-900 transition"
  (click)="goBack()"
>
  ‚Üê Volver a Cat√°logos
</button>

<!-- Bot√≥n crear nueva relaci√≥n -->
<button
  class="mb-4 ml-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition"
  (click)="abrirModalRelacion()"
>
  + Crear nueva relaci√≥n Eje - Objetivo
</button>

<div class="p-6">
  <h2 class="text-2xl font-bold mb-4">Relaciones del Plan Nacional de Desarrollo</h2>

  <!-- Ejes agrupados -->
  <div *ngFor="let grupo of ejesAgrupados" class="mb-6 border border-gray-300 rounded-xl p-4">
    <!-- Header de Eje -->
    <div class="flex justify-between items-center">
      <h3 class="text-lg font-semibold text-blue-900">{{ grupo.eje.nombre }}</h3>
      <button
        (click)="abrirModal(grupo.eje.ejePnId)"
        class="text-sm bg-blue-500 text-white px-3 py-1 rounded hover:bg-blue-600"
      >
        + A√±adir Objetivo (Mock)
      </button>
    </div>

    <!-- Objetivos del eje -->
    <div *ngFor="let obj of grupo.objetivos" class="ml-4 mt-4">
      <div class="flex justify-between items-center">
        <p class="font-medium text-gray-700">üìå {{ obj.nombre }}</p>
        <div class="flex gap-2">
          <button
            (click)="abrirMetaModal(obj.objPnId)"
            class="text-xs bg-green-500 text-white px-2 py-1 rounded hover:bg-green-600"
          >
            + A√±adir Meta
          </button>
          <button
            (click)="abrirPoliticaModal(obj.objPnId)"
            class="text-xs bg-purple-500 text-white px-2 py-1 rounded hover:bg-purple-600"
          >
            + A√±adir Pol√≠tica
          </button>
        </div>
      </div>

      <!-- Metas -->
      <div class="ml-4 text-sm text-green-700" *ngIf="obj.metas.length > 0">
        <p class="font-semibold">Metas:</p>
        <ul class="list-disc ml-4">
          <li *ngFor="let meta of obj.metas">{{ meta.nombre }}</li>
        </ul>
      </div>

      <!-- Pol√≠ticas -->
      <div class="ml-4 text-sm text-purple-700" *ngIf="obj.politicas.length > 0">
        <p class="font-semibold">Pol√≠ticas:</p>
        <ul class="list-disc ml-4">
          <li *ngFor="let poli of obj.politicas">{{ poli.nombre }}</li>
        </ul>
      </div>
    </div>
  </div>

  <!-- Modal Eje ‚áÑ Objetivo (Real) -->
  <app-add-eje-objetivo-modal
    [visible]="modalRelacionVisible"
    (closed)="modalRelacionVisible = false"
    (relacionCreada)="crearRelacionEjeObjetivo($event)"
  />

  <!-- Modal Objetivo (Mock - a√∫n no funcional real) -->
  <app-add-objetivo-modal
    [visible]="modalVisible"
    (closed)="cerrarModal()"
    (objetivoCreado)="agregarObjetivo($event)"
  />

  <!-- Modal Meta -->
  <app-add-meta-modal
    [visible]="metaModalVisible"
    (closed)="metaModalVisible = false"
    (metaCreada)="agregarMeta($event)"
  />

  <!-- Modal Pol√≠tica -->
  <app-add-politica-modal
    [visible]="politicaModalVisible"
    (closed)="politicaModalVisible = false"
    (politicaCreada)="agregarPolitica($event)"
  />
</div>
